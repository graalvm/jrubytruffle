# This file contains native-image arguments needed to build truffleruby
#

ImageName = ruby

Requires = Tool:nfi

LauncherClass = org.truffleruby.launcher.RubyLauncher

Args = -H:MaxRuntimeCompileMethods=7500 \
       -H:SubstitutionResources=org/truffleruby/aot/substitutions.json \
       -H:+AddAllCharsets \
       -H:Class=org.truffleruby.launcher.RubyLauncher

# Pass the home for context pre-initialization
# ${.} expands to the destination Ruby home created by mx fetch-languages,
# such as substratevm/svmbuild/native-image-root/languages/ruby.
JavaArgs = -Dtruffleruby.preinitialization.home=${.} \
           -Dpolyglot.engine.PreinitializeContexts=ruby \
           -Dorg.graalvm.launcher.standalone=true
